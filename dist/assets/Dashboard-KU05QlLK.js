import{j as e}from"./ui-BoKmkzIG.js";import{r as a,L as s,b as t}from"./vendor-C3gKaNvt.js";const r=()=>e.jsx("div",{className:"py-3 animate-pulse",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"mt-1 mr-4 p-2 rounded-full bg-gray-200 h-9 w-9"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4 mt-2"}),e.jsx("div",{className:"mt-2 flex items-center",children:e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})})]})]})}),l=a.memo((({activity:a,index:s,getActivityIcon:t,formatRelativeTime:r})=>e.jsx("div",{className:"py-3 activity-item",style:{transitionDelay:.05*s+"s"},children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"mt-1 mr-4 p-2 rounded-full "+("material"===a.type?"bg-blue-100":"quiz"===a.type?"bg-purple-100":"bg-green-100"),children:t(a.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:a.title}),e.jsx("span",{className:"text-xs text-gray-500",children:r(a.timestamp)})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["material"===a.type&&e.jsxs(e.Fragment,{children:["Menyelesaikan materi ",e.jsx("span",{className:"font-medium",children:a.title})]}),"quiz"===a.type&&e.jsxs(e.Fragment,{children:["Mengerjakan latihan soal dengan skor ",e.jsx("span",{className:"font-medium",children:a.score})]}),"flashcard"===a.type&&e.jsxs(e.Fragment,{children:["Menyelesaikan sesi kartu ",e.jsx("span",{className:"font-medium",children:a.title})]}),"test"===a.type&&e.jsx(e.Fragment,{children:a.description})]}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-500 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-xs font-medium text-yellow-700",children:["+",a.xpGained," XP"]})]})]})]})},a.id))),i=a.memo((({activities:t=[],isLoading:i=!1})=>{const n=a.useRef(null);a.useEffect((()=>{if(!n.current||0===t.length||i)return;const e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("visible")}))}),{root:n.current,threshold:.1}),a=n.current.querySelectorAll(".activity-item");return a.forEach((a=>e.observe(a))),()=>{a.forEach((a=>e.unobserve(a)))}}),[t,i]);const d=e=>{const a=new Date,s=new Date(e),t=Math.floor((a-s)/1e3);if(t<60)return"Baru saja";const r=Math.floor(t/60);if(r<60)return`${r} menit yang lalu`;const l=Math.floor(r/60);if(l<24)return`${l} jam yang lalu`;const i=Math.floor(l/24);return i<7?`${i} hari yang lalu`:s.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})},c=a=>{switch(a){case"material":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})});case"quiz":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})});case"flashcard":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})});default:return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 h-full flex flex-col",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Aktivitas Terbaru"}),i?e.jsx("div",{className:"overflow-y-auto max-h-[400px] flex-grow",children:e.jsx("div",{className:"divide-y",children:[...Array(4)].map(((a,s)=>e.jsx(r,{},s)))})}):t&&t.length>0?e.jsx("div",{ref:n,className:"overflow-y-auto max-h-[400px] scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 pr-2 flex-grow",children:e.jsx("div",{className:"divide-y",children:t.map(((a,s)=>e.jsx(l,{activity:a,index:s,getActivityIcon:c,formatRelativeTime:d},a.id)))})}):e.jsxs("div",{className:"text-center py-8 flex-grow",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-gray-500",children:"Belum ada aktivitas yang tercatat"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Mulai belajar untuk menampilkan aktivitas terbaru"})]}),e.jsx("div",{className:"mt-4 text-center pt-2 border-t",children:e.jsx(s,{to:"/aktivitas",className:"text-blue-600 hover:underline font-medium",children:"Lihat Semua Aktivitas"})})]})})),n=({completedTopics:a=[]})=>a&&0!==a.length?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Topik yang Sudah Diselesaikan"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((a=>e.jsxs("div",{className:"border border-green-200 bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-full mr-3",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:a.title}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Diselesaikan pada ",new Date(a.completedAt).toLocaleDateString("id-ID",{day:"numeric",month:"long"})]})]})]}),e.jsx("div",{className:"mt-3 text-right",children:e.jsx(s,{to:`/materi/${a.category}/${a.title.toLowerCase().replace(/\s+/g,"-")}`,className:"text-sm text-green-600 hover:text-green-800",children:"Lihat Kembali"})})]},a.id)))})]}):null,d=()=>{const r=t(),[l,d]=a.useState(!0),[c,o]=a.useState(null),[m,x]=a.useState({completedTopics:[],totalTopics:15,dailyStreak:0,xpPoints:0,rank:"Pemula",nextMilestone:100,activities:[]});return a.useEffect((()=>{if(!localStorage.getItem("token"))return void r("/login");const e=localStorage.getItem("userId");if(!e)return void r("/login");const a=JSON.parse(localStorage.getItem("users")||"[]").find((a=>a.id===e));o(a);const s=localStorage.getItem("userProgress");s&&x(JSON.parse(s)),setTimeout((()=>{d(!1)}),500)}),[r]),a.useEffect((()=>(console.log("Dashboard viewed"),()=>{})),[]),l?e.jsx("div",{className:"min-h-screen bg-gray-50 flex justify-center items-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Memuat dashboard..."})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg mb-6 p-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Selamat Datang, ",c&&(c.name||c.email&&c.email.split("@")[0])||"Siswa","!"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Lanjutkan belajar Matematika dan tingkatkan kemampuanmu"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Direkomendasikan untuk Anda"}),e.jsx("div",{className:"space-y-4",children:[{id:1,type:"materi",title:"Fungsi dan Grafik",description:"Pelajari konsep fungsi matematika dan cara menggambar grafiknya",category:"aljabar",slug:"fungsi-dan-grafik",difficulty:"Menengah",estimatedTime:"20 menit"},{id:2,type:"soal",title:"Persamaan Linear",description:"Latihan soal tentang persamaan linear satu variabel",category:"aljabar",slug:"persamaan-linear",difficulty:"Dasar",questionCount:10},{id:3,type:"flashcard",title:"Persamaan Kuadrat",description:"Kartu pengingat tentang rumus dan konsep persamaan kuadrat",category:"aljabar",slug:"persamaan-kuadrat",cardCount:20}].map((a=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-6 py-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:a.title}),e.jsx("p",{className:"text-gray-600 mb-2",children:a.description}),e.jsx(s,{to:`/${a.type}/${a.category}/${a.slug}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:"Mulai Belajar"})]},a.id)))})]})}),e.jsx("div",{className:"h-[600px]",children:e.jsx(i,{activities:m.activities})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(n,{completedTopics:m.completedTopics})})]})};export{d as default};
