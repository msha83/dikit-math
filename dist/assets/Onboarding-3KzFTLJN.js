import{j as e}from"./ui-BoKmkzIG.js";import{b as a,r as s}from"./vendor-C3gKaNvt.js";import{r as i,b as r,u as t,i as n}from"./firebase-BeVwnubw.js";const l={apiKey:"AIzaSyA_w7oAXXQVCfWuWXSiG9j2wI6o0GGmwjM",authDomain:"mathedu-leaderboard.firebaseapp.com",projectId:"mathedu-leaderboard",storageBucket:"mathedu-leaderboard.appspot.com",messagingSenderId:"485273185384",appId:"1:485273185384:web:ebc257b3adb7b7a70fd5c2",databaseURL:"https://mathedu-leaderboard-default-rtdb.asia-southeast1.firebasedatabase.app"};let d;try{d=n(l)}catch(m){d=n(l,"secondary")}const o=r(d),c=()=>{const r=a(),[n,l]=s.useState(1),[d,c]=s.useState([]),[u,x]=s.useState(""),[h,g]=s.useState(""),[b,p]=s.useState(""),[j,v]=s.useState(!1);s.useEffect((()=>{const e=localStorage.getItem("token"),a=JSON.parse(localStorage.getItem("user")||"{}");e&&a.id||r("/login")}),[r]);const y=()=>{switch(n){case 1:return d.length>0;case 2:return""!==u;case 3:return""!==h;case 4:return""!==b;default:return!1}},N=async()=>{v(!0);try{const e=JSON.parse(localStorage.getItem("user")||"{}");if(!e.id)throw new Error("User not found");const a={topics:d,level:u,goal:h,studyTime:b,completed:!0,completedAt:(new Date).toISOString()};localStorage.setItem("onboarding",JSON.stringify(a));const s=i(o,`users/${e.id}`);await t(s,{preferences:a,onboardingCompleted:!0,lastUpdated:(new Date).toISOString()});let n={...JSON.parse(localStorage.getItem("userProgress")||"{}")};switch(u){case"beginner":n.xpPoints=50,n.rank="Pemula",n.nextMilestone=200;break;case"intermediate":n.xpPoints=200,n.rank="Menengah",n.nextMilestone=500;break;case"advanced":n.xpPoints=500,n.rank="Mahir",n.nextMilestone=1e3}localStorage.setItem("userProgress",JSON.stringify(n)),v(!1),r("/dashboard")}catch(m){console.error("Error saving onboarding data:",m),v(!1),r("/dashboard")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx("div",{className:"w-full bg-white shadow-sm py-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-in-out",style:{width:n/4*100+"%"}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-500",children:[e.jsx("span",{className:n>=1?"text-blue-600 font-medium":"",children:"Topik"}),e.jsx("span",{className:n>=2?"text-blue-600 font-medium":"",children:"Level"}),e.jsx("span",{className:n>=3?"text-blue-600 font-medium":"",children:"Tujuan"}),e.jsx("span",{className:n>=4?"text-blue-600 font-medium":"",children:"Waktu"})]})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-3xl w-full bg-white rounded-lg shadow-lg p-8",children:[1===n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pilih Topik yang Ingin Dipelajari"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Pilih minimal satu topik yang ingin kamu pelajari"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{id:"algebra",name:"Aljabar",icon:"📊"},{id:"geometry",name:"Geometri",icon:"📐"},{id:"statistics",name:"Statistika",icon:"📈"},{id:"calculus",name:"Kalkulus",icon:"∫"},{id:"trigonometry",name:"Trigonometri",icon:"🔺"},{id:"linear-programming",name:"Program Linier",icon:"📝"},{id:"probability",name:"Probabilitas",icon:"🎲"},{id:"vectors",name:"Vektor",icon:"➡️"}].map((a=>e.jsxs("div",{onClick:()=>{return e=a.id,void(d.includes(e)?c(d.filter((a=>a!==e))):c([...d,e]));var e},className:"p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md "+(d.includes(a.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"),children:[e.jsx("div",{className:"text-3xl mb-2",children:a.icon}),e.jsx("div",{className:"font-medium",children:a.name})]},a.id)))})]}),2===n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pilih Level Kemampuan"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Kami akan menyesuaikan materi berdasarkan levelmu"})]}),e.jsx("div",{className:"space-y-4",children:[{id:"beginner",name:"Pemula",description:"Baru memulai belajar matematika SMA"},{id:"intermediate",name:"Menengah",description:"Sudah memahami konsep dasar"},{id:"advanced",name:"Lanjutan",description:"Siap untuk tantangan level tinggi"}].map((a=>e.jsxs("div",{onClick:()=>x(a.id),className:"p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md "+(u===a.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"),children:[e.jsx("div",{className:"font-medium text-lg",children:a.name}),e.jsx("div",{className:"text-gray-600 text-sm",children:a.description})]},a.id)))})]}),3===n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Apa Tujuan Belajarmu?"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Kami akan membantu mencapai tujuanmu"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{id:"improve-grades",name:"Meningkatkan Nilai",icon:"📝"},{id:"prepare-exams",name:"Persiapan Ujian",icon:"📚"},{id:"competition",name:"Olimpiade/Kompetisi",icon:"🏆"},{id:"personal",name:"Pengembangan Pribadi",icon:"🌱"}].map((a=>e.jsxs("div",{onClick:()=>g(a.id),className:"p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md "+(h===a.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"),children:[e.jsx("div",{className:"text-2xl mb-2",children:a.icon}),e.jsx("div",{className:"font-medium",children:a.name})]},a.id)))})]}),4===n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Berapa Lama Waktu Belajarmu?"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Jadwal belajar yang konsisten adalah kunci keberhasilan"})]}),e.jsx("div",{className:"space-y-4",children:[{id:"15min",name:"15 menit/hari",description:"Untuk jadwal yang padat"},{id:"30min",name:"30 menit/hari",description:"Seimbang antara belajar dan kegiatan lain"},{id:"60min",name:"60 menit/hari",description:"Untuk hasil yang optimal"},{id:"custom",name:"Kustom",description:"Saya akan mengatur sendiri"}].map((a=>e.jsxs("div",{onClick:()=>p(a.id),className:"p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md "+(b===a.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"),children:[e.jsx("div",{className:"font-medium text-lg",children:a.name}),e.jsx("div",{className:"text-gray-600 text-sm",children:a.description})]},a.id)))})]}),e.jsxs("div",{className:"mt-8 flex justify-between",children:[e.jsx("button",{onClick:()=>{n>1&&l(n-1)},disabled:1===n,className:"px-4 py-2 rounded-md font-medium "+(1===n?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Kembali"}),e.jsx("button",{onClick:()=>{n<4?l(n+1):N()},disabled:!y()||j,className:"px-4 py-2 rounded-md font-medium "+(!y()||j?"bg-blue-300 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:j?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Memproses..."]}):4===n?"Selesai":"Lanjut"})]})]})})]})};export{c as default};
